<!DOCTYPE html>


<html>
    <head>  <!-- Tout ce qui est pas dans le contenu -->
        <title> game setup </title> <!-- Titre de l'onglet -->

        <script src="game_function.js"> </script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"> </script>
        <script src = "https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"> </script>
        <script src = "https://cdnjs.cloudflare.com/ajax/libs/es6-shim/0.32.2/es6-shim.min.js"> </script>
        <script src = "https://cdnjs.cloudflare.com/ajax/libs/history.js/1.8/bundled-uncompressed/html4+html5/jquery.history.js"> </script>

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
        <link rel="stylesheet" href="//en.wikipedia.org/w/load.php?modules=mediawiki.legacy.commonPrint,shared|mediawiki.skinning.elements|mediawiki.skinning.content|mediawiki.skinning.interface|skins.vector.styles|site|mediawiki.skinning.content.parsoid|ext.cite.style&amp;only=styles&amp;skin=vector"/>
        <link rel="stylesheet" href="game-styles.css">

    </head>

    <body>
        <header id = "header-game">
            <div class="wrapper">
                <div>
                    <div id="header-image">

                    </div>
                    <div id="header-title">
                        <h1> The Wiki Game</h1>
                    </div>

                </div>

                <nav>
                    <ul>
                        <li> <a href="set-game.html"> Play </a></li>
                        <li> <a href="accueil.html"> Home </a></li>
                        <li> <a href="accueil.html#contact"> Contact </a></li>
                    </ul>
                </nav>
            </div>
        </header>

        <section id="game-info">

            <p style="font-size: 40px" id = "word-to-find"> Article to find : </p>

            <p id="timer"> time left :  </p>

            <script>
                // warning : when refreshed break the timer or reset it
                // this script should not be applied on refresh

                var queryString = location.search.substring(1); 
                var timeAhead  = queryString.split("|")[0];
                load_timer(timeAhead);
                


            </script>
        </section>


        <section id="wiki-pages">
            <div class='container'>
                <h1 id="wiki-title"></h1>
                <div id="content"></div>

                <script>

                    var titleElem = document.getElementById('wiki-title');
                    var contentElem = document.getElementById('content');
                    var stylesheetElem = document.getElementById('style');

                    
                    var firstPageRequest = fetchFeaturedArticle();
                    var targetPageRequest = fetchFeaturedArticle();

                    // Make the back button work
                    History.replaceState(null, '', ''); // Ensure a state change later

                    $(window).on('statechange', function () {
                        console.log('state changed');
                        $.when(targetPageRequest,firstPageRequest).done(function(title, targetTitle) {
                            
                            console.log("in when: " + targetTitle);
                            console.log("history title : " + History.getState().title);
                            loadPage(History.getState().title, targetTitle, titleElem, contentElem, stylesheetElem);
                        });


                    });

                </script>

            </div>
        </section>


        <footer>
            <h1> The Wiki Game </h1>
            <div class="copyright">
                Copyright 2020
            </div>
        </footer>

    </body>
</html>